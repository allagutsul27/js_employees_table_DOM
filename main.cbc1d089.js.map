{"version":3,"sources":["scripts/main.js"],"names":["body","document","querySelector","table","thead","tHead","tBody","tBodies","tBodyRows","rows","forEach","row","classList","add","form","createElement","insertAdjacentHTML","append","nameField","positionField","officeField","ageField","salaryField","saveButton","addEventListener","e","preventDefault","checkValidity","showNotification","value","toLocaleString","reset","length","activeRow","active","remove","contains","target","targetIndex","isFirstClick","currentTH","bodyRowsArray","querySelectorAll","cellIndex","tagName","sort","rowA","rowB","cells","innerHTML","localeCompare","textContent","normalizeNum","editing","number","split","join","slice","td","closest","tdIndex","headerCell","initialValue","input","select","savedValue","evnt","key","blur","type","focus","title","description","notification","setTimeout"],"mappings":"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","file":"main.cbc1d089.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\n\nconst body = document.querySelector('body');\n\nconst table = document.querySelector('table');\nconst thead = table.tHead;\nconst tBody = table.tBodies[0];\nconst tBodyRows = tBody.rows;\n\n[...tBodyRows].forEach(row => row.classList.add('tableRow'));\n\nconst form = document.createElement('form');\n\nform.classList.add('new-employee-form');\n\nform.insertAdjacentHTML('beforeend',\n  `<label>\n        Name:\n        <input data-qa=\"name\" name=\"name\" type=\"text\" minLength=\"4\" required>\n        </label>\n\n        <label>\n        Position:\n        <input data-qa=\"position\" name=\"position\" type=\"text\"\n        minLength=\"4\" required>\n     </label>\n\n     <label>\n        Office:\n        <select data-qa=\"office\" name=\"office\" type=\"select\" required>\n          <option value=\"Tokyo\" selected>Tokyo</option>\n          <option value=\"Singapore\">Singapore</option>\n          <option value=\"London\">London</option>\n          <option value=\"New York\">New York</option>\n          <option value=\"Edinburgh\">Edinburgh</option>\n          <option value=\"San Francisco\">San Francisco</option>\n        </select>\n     </label>\n\n     <label>\n     Age:\n        <input data-qa=\"age\" name=\"age\" type=\"number\" min=\"18\"\n        max=\"90\" required>\n     </label>\n\n     <label>\n        Salary:\n        <input data-qa=\"salary\" name=\"salary\" type=\"number\"\n        min=\"1\" max=\"9999999\" required>\n     </label>\n\n      <button class=\"saveButton\" name=\"btn\" type=\"submit\"\n        required>Save to table</button>`\n);\nbody.append(form);\n\nconst nameField = document.querySelector('[data-qa=\"name\"]');\nconst positionField = document.querySelector('[data-qa=\"position\"]');\nconst officeField = document.querySelector('[data-qa=\"office\"]');\nconst ageField = document.querySelector('[data-qa=\"age\"]');\nconst salaryField = document.querySelector('[data-qa=\"salary\"]');\nconst saveButton = document.querySelector('.saveButton');\n\nsaveButton.addEventListener('click', (e) => {\n  e.preventDefault();\n\n  if (form.checkValidity()) {\n    showNotification('Success notification',\n      'New employee is successfully added to the table', 'success');\n\n    tBody.insertAdjacentHTML('beforeend',\n      `<tr class='tableRow'>\n          <td>${nameField.value}</td>\n          <td>${positionField.value}</td>\n          <td>${officeField.value}</td>\n          <td>${ageField.value}</td>\n          <td>$${(+salaryField.value).toLocaleString('en-US')}</td>\n          </tr>`\n    );\n\n    form.reset();\n  } else {\n    if (nameField.value.length < 4) {\n      showNotification('Error notification',\n        'The length of the name must be greater than 4', 'error');\n    } else if (positionField.value < 4) {\n      showNotification('Error notification',\n        'The length of the name must be greater than 4', 'error');\n    } else if (ageField.value < 18 || ageField.value > 90) {\n      showNotification('Error notification',\n        'The age is incorrect', 'error');\n    } else if (salaryField.value <= 0 || salaryField.value > 999999) {\n      showNotification('Error notification',\n        'Enter the correct salary value', 'error');\n    } else {\n      showNotification('Error notification',\n        'All fields must be filled in correctly', 'error');\n    }\n  }\n});\n\nlet activeRow = null;\n\ndocument.addEventListener('click', (e) => {\n  if (!tBody.contains(e.target)) {\n    [...tBodyRows].forEach(row => row.classList.remove('active'));\n  }\n\n  for (const row of tBodyRows) {\n    if (row.contains(e.target)) {\n      active(row);\n    }\n  }\n});\n\nfunction active(row) {\n  if (activeRow) {\n    activeRow.classList.remove('active');\n  }\n  activeRow = row;\n  activeRow.classList.add('active');\n}\n\nlet isFirstClick = true;\nlet currentTH = null;\nlet targetIndex;\n\nthead.addEventListener('click', function(e) {\n  const bodyRowsArray = [...tBody.querySelectorAll('.tableRow')];\n\n  targetIndex = e.target.cellIndex;\n\n  if (!e.target.tagName === 'TH') {\n    return;\n  }\n\n  if (currentTH && currentTH !== e.target) {\n    isFirstClick = true;\n  }\n  currentTH = e.target;\n\n  if (isFirstClick) {\n    bodyRowsArray.sort((rowA, rowB) => rowA.cells[targetIndex].innerHTML\n      .localeCompare(rowB.cells[targetIndex].innerHTML));\n\n    if (e.target.textContent === 'Salary') {\n      bodyRowsArray.sort((rowA, rowB) => normalizeNum(\n        rowA.cells[targetIndex].innerHTML) - normalizeNum(\n        rowB.cells[targetIndex].innerHTML));\n    }\n    isFirstClick = false;\n  } else {\n    bodyRowsArray.sort((rowA, rowB) => rowB.cells[targetIndex].innerHTML\n      .localeCompare(rowA.cells[targetIndex].innerHTML));\n\n    if (e.target.textContent === 'Salary') {\n      bodyRowsArray.sort((rowA, rowB) => normalizeNum(\n        rowB.cells[targetIndex].innerHTML) - normalizeNum(\n        rowA.cells[targetIndex].innerHTML));\n    }\n    isFirstClick = true;\n  }\n\n  tBody.append(...bodyRowsArray);\n});\n\nlet editing = false;\n\ntBody.addEventListener('dblclick', (e) => {\n  if (editing) {\n    return;\n  }\n\n  const td = e.target.closest('td');\n  const tdIndex = td.cellIndex;\n  const header = table.querySelector('tr');\n  const headerCell = header.cells[tdIndex].textContent;\n\n  if (!td) {\n    return;\n  }\n\n  const initialValue = td.textContent;\n\n  td.textContent = '';\n\n  let input;\n\n  if (headerCell === 'Office') {\n    if (editing) {\n      return;\n    }\n\n    const select = document.createElement('select');\n\n    select.insertAdjacentHTML('beforeend', `\n      <option value=\"Tokyo\" selected>Tokyo</option>\n      <option value=\"Singapore\">Singapore</option>\n      <option value=\"London\">London</option>\n      <option value=\"New York\">New York</option>\n      <option value=\"Edinburgh\">Edinburgh</option>\n      <option value=\"San Francisco\">San Francisco</option>\n    `);\n    td.append(select);\n    editing = true;\n\n    select.addEventListener('blur', () => {\n      editing = false;\n\n      const savedValue = select.value;\n\n      select.remove();\n\n      td.textContent = savedValue;\n\n      if (!savedValue) {\n        td.textContent = initialValue;\n      }\n    });\n\n    select.addEventListener('keypress', (evnt) => {\n      if (evnt.key === 'Enter') {\n        select.blur();\n      }\n    });\n  } else {\n    input = document.createElement('input');\n\n    input.classList.add('cell-input');\n    input.value = initialValue;\n    input.type = 'text';\n    td.append(input);\n    editing = true;\n  }\n\n  if (!input) {\n    return;\n  }\n\n  input.addEventListener('blur', () => {\n    editing = false;\n\n    if (headerCell === 'Name' && input.value.length < 4) {\n      showNotification('Error notification',\n        'The length of the name must be greater than 4', 'error');\n      input.focus();\n    } else if (headerCell === 'Position' && input.value.length < 4) {\n      showNotification('Error notification',\n        'The length of the position must be greater than 5', 'error');\n      input.focus();\n    } else if (headerCell === 'Age' && (input.value < 18 || input.value > 90)) {\n      showNotification('Error notification',\n        'The age is incorrect', 'error');\n      input.focus();\n    } else if (headerCell === 'Salary'\n      && (input.value <= 0 || input.value > 999999)) {\n      showNotification('Error notification',\n        'Enter the correct salary value', 'error');\n      input.focus();\n    } else if (headerCell === 'Office' && input.value.length < 4) {\n      showNotification('Error notification',\n        'The length of the office must be greater than 4', 'error');\n      input.focus();\n    } else {\n      if (headerCell === 'Salary') {\n        const savedValue = `$${(+input.value).toLocaleString('en-US')}`;\n\n        input.remove();\n\n        td.textContent = savedValue;\n\n        if (!savedValue) {\n          td.textContent = initialValue;\n        }\n      } else {\n        const savedValue = input.value;\n\n        input.remove();\n\n        td.textContent = savedValue;\n\n        if (!savedValue) {\n          td.textContent = initialValue;\n        }\n      }\n    }\n  });\n\n  input.addEventListener('keypress', (evnt) => {\n    if (evnt.key === 'Enter') {\n      input.blur();\n    }\n  });\n});\n\nfunction normalizeNum(number) {\n  return number.split(',').join('').slice(1);\n}\n\nconst showNotification = (title, description, type) => {\n  body.insertAdjacentHTML('beforeend', `\n      <div class=\"notification ${type}\" data-qa=\"notification\">\n        <h2>${title}</h2>\n        <p>${description}</p>\n      </div>\n    `);\n\n  const notification = document.querySelector('.notification');\n\n  setTimeout(() => notification.remove(), 2000);\n};\n"]}